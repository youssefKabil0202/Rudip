<div class="dashboard-container">
  <!-- Fixed Sidebar -->
  <!-- This sidebar should be IDENTICAL in both dashboard and events components -->
  <div class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <mat-icon>dashboard</mat-icon>
        <span>AdminPanel</span>
      </div>
    </div>

    <nav class="sidebar-nav">
      <div class="nav-section">MAIN MENU</div>
      <a class="nav-item" routerLink="/dashboard" routerLinkActive="active">
        <mat-icon>dashboard</mat-icon>
        <span>Tableau de Bord</span>
      </a>
      <a class="nav-item" routerLink="/events" routerLinkActive="active">
        <mat-icon>event</mat-icon>
        <span>Événements</span>
      </a>

      <div class="nav-section">ANALYTICS</div>
      <a class="nav-item">
        <mat-icon>bar_chart</mat-icon>
        <span>Analytics</span>
      </a>
      <a class="nav-item">
        <mat-icon>shopping_cart</mat-icon>
        <span>Commandes</span>
      </a>
      <a class="nav-item">
        <mat-icon>inventory</mat-icon>
        <span>Produits</span>
      </a>

      <div class="nav-section">SYSTEM</div>
      <a class="nav-item">
        <mat-icon>settings</mat-icon>
        <span>Paramètres</span>
      </a>
      <a class="nav-item">
        <mat-icon>help</mat-icon>
        <span>Support</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="user-info">
        <div class="user-avatar">
          <mat-icon>account_circle</mat-icon>
        </div>
        <div class="user-details">
          <strong>Administrateur</strong>
          <span>ADMIN</span>
        </div>
      </div>
    </div>
  </div>
  <!-- Main Content (right side) -->
  <div class="main-content">
    <!-- Header -->
    <div class="content-header">
      <div>
        <h1>Événements</h1>
        <p class="subtitle">Tous les événements en un seul endroit</p>
      </div>
      <button class="btn btn-create" (click)="createNewEvent()">
        <mat-icon>add</mat-icon>
        Créer un événement
      </button>
    </div>

    <!-- Filters -->
    <div class="filters">
      <div class="search-container">
        <mat-icon>search</mat-icon>
        <input type="text" placeholder="Rechercher des événements..." class="search-input">
      </div>
      <select class="filter-dropdown">
        <option>Tous les types</option>
        <option>Conférence</option>
        <option>Atelier</option>
        <option>Réseautage</option>
      </select>
      <select class="filter-dropdown">
        <option>Tous les statuts</option>
        <option>Publié</option>
        <option>Brouillon</option>
        <option>Terminé</option>
      </select>
    </div>

    <!-- Events Grid -->
    <div class="events-grid">
      <div class="event-card" *ngFor="let event of events">
        <div class="event-image">
          <img [src]="getImageUrl(event)" alt="{{event.title}}" (error)="handleImageError($event)">
        </div>
        <div class="event-content">
          <div class="event-header">
            <span class="event-status" [ngClass]="getStatusClass(event.status)">
              {{ getStatusText(event.status) }}
            </span>
            <span class="event-date">
              <mat-icon>calendar_today</mat-icon>
              {{ formatDate(event.startDate) }}
            </span>
          </div>
          <h3 class="event-title">{{ event.title }}</h3>
          <p class="event-description">{{ truncate(event.description, 100) }}</p>

          <div class="event-details">
            <span class="event-location">
              <mat-icon>location_on</mat-icon>
              {{ event.city }}, {{ event.country }}
            </span>
            <span class="event-participants">
              <mat-icon>people</mat-icon>
              {{ event.participantCount }}/{{ event.maxParticipants }}
            </span>
          </div>

          <div class="event-footer">
            <span class="event-price">{{ event.price === 0 ? 'Gratuit' : (event.price + '€') }}</span>
            <button class="btn-details" [routerLink]="['/events', event.id]">
              Voir détails
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- No Events / Loading -->
    <div *ngIf="events.length === 0 && !isLoading" class="no-events">
      <mat-icon>event_busy</mat-icon>
      <h4>Aucun événement trouvé</h4>
      <p>Créez votre premier événement pour commencer</p>
      <button class="btn btn-create" (click)="createNewEvent()">
        <mat-icon>add</mat-icon>
        Créer un événement
      </button>
    </div>

    <div *ngIf="isLoading" class="loading">
      <mat-spinner diameter="50"></mat-spinner>
      <p>Chargement des événements...</p>
    </div>
  </div>
</div>
