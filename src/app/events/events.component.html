<div class="events-container">
  <!-- Header -->
  <div class="events-header">
    <div class="container-fluid">
      <div class="d-flex justify-content-between align-items-center py-4">
        <div>
          <h1 class="h2 fw-bold text-dark mb-1">Événements</h1>
          <p class="text-muted mb-0">Gérez tous vos événements en un seul endroit</p>
        </div>
        <button class="btn btn-primary">
          <i class="bi bi-plus-circle me-2"></i>
          Nouvel Événement
        </button>
      </div>
    </div>
  </div>

  <!-- Search and Filters -->
  <div class="container-fluid">
    <div class="card border-0 shadow-sm mb-4">
      <div class="card-body">
        <div class="row g-3 align-items-center">
          <div class="col-md-6">
            <div class="search-box">
              <i class="bi bi-search text-muted"></i>
              <input
                type="text"
                class="form-control form-control-lg border-0"
                placeholder="Rechercher des événements..."
                [(ngModel)]="searchTerm"
                (input)="onSearch()">
            </div>
          </div>
          <div class="col-md-3">
            <select class="form-select" [(ngModel)]="selectedType" (change)="onFilterChange()">
              <option value="">Tous les types</option>
              <option value="CONFERENCE">Conférence</option>
              <option value="MEETUP">Meetup</option>
              <option value="WEBINAR">Webinar</option>
              <option value="WORKSHOP">Atelier</option>
              <option value="OTHER">Autre</option>
            </select>
          </div>
          <div class="col-md-3">
            <select class="form-select" [(ngModel)]="selectedStatus" (change)="onFilterChange()">
              <option value="">Tous les statuts</option>
              <option value="DRAFT">Brouillon</option>
              <option value="PUBLISHED">Publié</option>
              <option value="ONGOING">En cours</option>
              <option value="COMPLETED">Terminé</option>
              <option value="CANCELLED">Annulé</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="container-fluid py-5">
      <div class="text-center">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Chargement...</span>
        </div>
        <p class="mt-2 text-muted">Chargement des événements...</p>
      </div>
    </div>

    <!-- Events Table -->
    <!-- Replace the entire table section with this card layout -->
    <div *ngIf="!isLoading" class="container-fluid">
      <div class="row g-4">
        <div *ngFor="let event of filteredEvents" class="col-xl-4 col-lg-6 col-md-6">
          <div class="card event-card h-100 border-0 shadow-sm">
            <!-- Event Image -->
            <div class="event-image-container">
              <img
                [src]="getImageUrl(event)"
                [alt]="event.title"
                (error)="handleImageError($event)"
                class="event-image"
              />
              <div class="event-badge" [class.free]="event.price === 0">
                {{ formatPrice(event.price) }}
              </div>
              <div class="event-type-badge">
            <span class="badge" [ngClass]="getTypeBadgeClass(event.eventType.name)">
              {{ event.eventType.name }}
            </span>
              </div>
            </div>

            <!-- Card Body -->
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">{{ event.title }}</h5>
                <span class="badge" [ngClass]="getStatusBadgeClass(event.status)">
              {{ getStatusText(event.status) }}
            </span>
              </div>

              <p class="card-text text-muted small">{{ event.description | slice:0:100 }}{{ event.description.length > 100 ? '...' : '' }}</p>

              <div class="event-details">
                <div class="detail-item">
                  <i class="bi bi-calendar text-primary me-2"></i>
                  <small>{{ formatDate(event.startDate) }}</small>
                </div>
                <div class="detail-item">
                  <i class="bi bi-geo-alt text-primary me-2"></i>
                  <small>{{ event.city }}, {{ event.country }}</small>
                </div>
                <div class="detail-item">
                  <i class="bi bi-people text-primary me-2"></i>
                  <small>{{ event.participantCount }}/{{ event.maxParticipants }} participants</small>
                </div>
                <div class="detail-item">
                  <i class="bi bi-eye text-primary me-2"></i>
                  <small>{{ event.viewCount }} vues</small>
                </div>
              </div>
            </div>

            <!-- Card Footer -->
            <div class="card-footer bg-transparent border-0 pt-0">
              <div class="btn-group w-100">
                <button class="btn btn-outline-primary btn-sm" (click)="viewEvent(event.id)">
                  <i class="bi bi-eye me-1"></i>Voir
                </button>
                <button class="btn btn-outline-secondary btn-sm" (click)="editEvent(event.id)">
                  <i class="bi bi-pencil me-1"></i>Modifier
                </button>
                <button class="btn btn-outline-danger btn-sm" (click)="deleteEvent(event.id)">
                  <i class="bi bi-trash me-1"></i>Supprimer
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Empty State for Card Layout -->
        <div *ngIf="filteredEvents.length === 0" class="col-12">
          <div class="text-center py-5">
            <i class="bi bi-calendar-x display-1 text-muted"></i>
            <h5 class="text-muted mt-3">Aucun événement trouvé</h5>
            <p class="text-muted">Aucun événement ne correspond à vos critères de recherche.</p>
            <button class="btn btn-primary">
              <i class="bi bi-plus-circle me-2"></i>
              Créer un événement
            </button>
          </div>
        </div>
      </div>
    </div>
 </div>
</div>
